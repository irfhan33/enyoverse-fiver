{"ast":null,"code":"import _asyncToGenerator from\"E:/fiver-fix/enyoverse/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"E:\\\\fiver-fix\\\\enyoverse\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useEffect}from\"react\";import{TYPES}from\"../contexts/web3Context/Types.js\";import{Web3UserContext}from\"../contexts/web3Context/index.js\";/**\n * @note this hook should only be called inside the Web3Context. otherwise it will not work properly\n * @dev  this custom hook will run when the webpage loads. it will listen for changes in network (blockchain network) and account.\n */export var useAddWeb3ProviderListners=function useAddWeb3ProviderListners(){var _Web3UserContext=Web3UserContext(),dispatch=_Web3UserContext.dispatch,_Web3UserContext$stat=_Web3UserContext.state,provider=_Web3UserContext$stat.provider,acceptedChainId=_Web3UserContext$stat.acceptedChainId,switchChain=_Web3UserContext.switchChain;useEffect(function(){provider&&provider.on(\"accountsChanged\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(accounts){var payload;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:payload={isWalletConnected:false,account:null};if(accounts&&accounts.length){payload={isWalletConnected:true,account:accounts[0]};}dispatch({type:TYPES.UPDATE_CONNECTED_WALLET,payload:payload});case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());//  network event listeners\nprovider&&provider.on(\"chainChanged\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(chainId){var isCorrectChain;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:isCorrectChain=parseInt(acceptedChainId)===parseInt(chainId);dispatch({type:TYPES.UDATE_CHAIN_DETAILS,payload:{isCorrectChain:isCorrectChain,connectedChainId:chainId}});if(isCorrectChain){_context2.next=5;break;}_context2.next=5;return switchChain();case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());// eslint-disable-next-line react-hooks/exhaustive-deps\n},[provider]);};export var useInitializeWeb3=function useInitializeWeb3(){var _Web3UserContext2=Web3UserContext(),loadWeb3JS=_Web3UserContext2.loadWeb3JS,initializeWalletConnectProvider=_Web3UserContext2.initializeWalletConnectProvider;useEffect(function(){initializeWalletConnectProvider();loadWeb3JS();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);};export var useOnInitialWeb3Run=function useOnInitialWeb3Run(){var _Web3UserContext3=Web3UserContext(),dispatch=_Web3UserContext3.dispatch,_Web3UserContext3$sta=_Web3UserContext3.state,acceptedChainId=_Web3UserContext3$sta.acceptedChainId,web3Instance=_Web3UserContext3$sta.web3Instance,switchChain=_Web3UserContext3.switchChain,getChainId=_Web3UserContext3.getChainId;useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var chainId;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(web3Instance){_context3.next=2;break;}return _context3.abrupt(\"return\",null);case 2:_context3.next=4;return getChainId();case 4:chainId=_context3.sent;if(!(parseInt(acceptedChainId)!==parseInt(chainId))){_context3.next=10;break;}_context3.next=8;return switchChain();case 8:_context3.next=11;break;case 10:dispatch({type:TYPES.UDATE_CHAIN_DETAILS,payload:{isCorrectChain:true,connectedChainId:chainId}});case 11:case\"end\":return _context3.stop();}}},_callee3);}))();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[web3Instance]);};","map":{"version":3,"names":["useEffect","TYPES","Web3UserContext","useAddWeb3ProviderListners","dispatch","state","provider","acceptedChainId","switchChain","on","accounts","payload","isWalletConnected","account","length","type","UPDATE_CONNECTED_WALLET","chainId","isCorrectChain","parseInt","UDATE_CHAIN_DETAILS","connectedChainId","useInitializeWeb3","loadWeb3JS","initializeWalletConnectProvider","useOnInitialWeb3Run","web3Instance","getChainId"],"sources":["E:/fiver-fix/enyoverse/src/hooks/web3Hooks.js"],"sourcesContent":["import { useEffect } from \"react\";\nimport { TYPES } from \"../contexts/web3Context/Types.js\";\nimport { Web3UserContext } from \"../contexts/web3Context/index.js\";\n\n/**\n * @note this hook should only be called inside the Web3Context. otherwise it will not work properly\n * @dev  this custom hook will run when the webpage loads. it will listen for changes in network (blockchain network) and account.\n */\nexport const useAddWeb3ProviderListners = () => {\n  const {\n    dispatch,\n    state: { provider, acceptedChainId },\n    switchChain,\n  } = Web3UserContext();\n  useEffect(() => {\n    provider &&\n      provider.on(\"accountsChanged\", async (accounts) => {\n        let payload = {\n          isWalletConnected: false,\n          account: null,\n        };\n        if (accounts && accounts.length) {\n          payload = { isWalletConnected: true, account: accounts[0] };\n        }\n        dispatch({\n          type: TYPES.UPDATE_CONNECTED_WALLET,\n          payload: payload,\n        });\n      });\n    //  network event listeners\n    provider &&\n      provider.on(\"chainChanged\", async (chainId) => {\n        const isCorrectChain = parseInt(acceptedChainId) === parseInt(chainId);\n        dispatch({\n          type: TYPES.UDATE_CHAIN_DETAILS,\n          payload: {\n            isCorrectChain: isCorrectChain,\n            connectedChainId: chainId,\n          },\n        });\n        if (!isCorrectChain) await switchChain();\n      });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [provider]);\n};\n\nexport const useInitializeWeb3 = () => {\n  const { loadWeb3JS, initializeWalletConnectProvider } = Web3UserContext();\n\n  useEffect(() => {\n    initializeWalletConnectProvider();\n    loadWeb3JS();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n};\n\nexport const useOnInitialWeb3Run = () => {\n  const {\n    dispatch,\n    state: { acceptedChainId, web3Instance },\n    switchChain,\n    getChainId,\n  } = Web3UserContext();\n  useEffect(() => {\n    (async () => {\n      if (!web3Instance) return null;\n      //  this method will fetch the current connected blockchain network\n      const chainId = await getChainId();\n\n      //  if the connected network is not as required it will ask to switch it\n      if (parseInt(acceptedChainId) !== parseInt(chainId)) await switchChain();\n      else\n        dispatch({\n          type: TYPES.UDATE_CHAIN_DETAILS,\n          payload: {\n            isCorrectChain: true,\n            connectedChainId: chainId,\n          },\n        });\n    })();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [web3Instance]);\n};\n"],"mappings":"kOAAA,OAASA,SAAT,KAA0B,OAA1B,CACA,OAASC,KAAT,KAAsB,kCAAtB,CACA,OAASC,eAAT,KAAgC,kCAAhC,CAEA;AACA;AACA;AACA,GACA,MAAO,IAAMC,CAAAA,0BAA0B,CAAG,QAA7BA,CAAAA,0BAA6B,EAAM,CAC9C,qBAIID,eAAe,EAJnB,CACEE,QADF,kBACEA,QADF,wCAEEC,KAFF,CAEWC,QAFX,uBAEWA,QAFX,CAEqBC,eAFrB,uBAEqBA,eAFrB,CAGEC,WAHF,kBAGEA,WAHF,CAKAR,SAAS,CAAC,UAAM,CACdM,QAAQ,EACNA,QAAQ,CAACG,EAAT,CAAY,iBAAZ,0FAA+B,iBAAOC,QAAP,8HACzBC,OADyB,CACf,CACZC,iBAAiB,CAAE,KADP,CAEZC,OAAO,CAAE,IAFG,CADe,CAK7B,GAAIH,QAAQ,EAAIA,QAAQ,CAACI,MAAzB,CAAiC,CAC/BH,OAAO,CAAG,CAAEC,iBAAiB,CAAE,IAArB,CAA2BC,OAAO,CAAEH,QAAQ,CAAC,CAAD,CAA5C,CAAV,CACD,CACDN,QAAQ,CAAC,CACPW,IAAI,CAAEd,KAAK,CAACe,uBADL,CAEPL,OAAO,CAAEA,OAFF,CAAD,CAAR,CAR6B,sDAA/B,+DADF,CAcA;AACAL,QAAQ,EACNA,QAAQ,CAACG,EAAT,CAAY,cAAZ,2FAA4B,kBAAOQ,OAAP,yIACpBC,cADoB,CACHC,QAAQ,CAACZ,eAAD,CAAR,GAA8BY,QAAQ,CAACF,OAAD,CADnC,CAE1Bb,QAAQ,CAAC,CACPW,IAAI,CAAEd,KAAK,CAACmB,mBADL,CAEPT,OAAO,CAAE,CACPO,cAAc,CAAEA,cADT,CAEPG,gBAAgB,CAAEJ,OAFX,CAFF,CAAD,CAAR,CAF0B,GASrBC,cATqB,iDASCV,CAAAA,WAAW,EATZ,yDAA5B,iEADF,CAYA;AACD,CA7BQ,CA6BN,CAACF,QAAD,CA7BM,CAAT,CA8BD,CApCM,CAsCP,MAAO,IAAMgB,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,CACrC,sBAAwDpB,eAAe,EAAvE,CAAQqB,UAAR,mBAAQA,UAAR,CAAoBC,+BAApB,mBAAoBA,+BAApB,CAEAxB,SAAS,CAAC,UAAM,CACdwB,+BAA+B,GAC/BD,UAAU,GACV;AACD,CAJQ,CAIN,EAJM,CAAT,CAKD,CARM,CAUP,MAAO,IAAME,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,EAAM,CACvC,sBAKIvB,eAAe,EALnB,CACEE,QADF,mBACEA,QADF,yCAEEC,KAFF,CAEWE,eAFX,uBAEWA,eAFX,CAE4BmB,YAF5B,uBAE4BA,YAF5B,CAGElB,WAHF,mBAGEA,WAHF,CAIEmB,UAJF,mBAIEA,UAJF,CAMA3B,SAAS,CAAC,UAAM,CACd,wDAAC,uJACM0B,YADN,2DAC2B,IAD3B,gCAGuBC,CAAAA,UAAU,EAHjC,QAGOV,OAHP,qBAMKE,QAAQ,CAACZ,eAAD,CAAR,GAA8BY,QAAQ,CAACF,OAAD,CAN3C,mDAM4DT,CAAAA,WAAW,EANvE,wCAQGJ,QAAQ,CAAC,CACPW,IAAI,CAAEd,KAAK,CAACmB,mBADL,CAEPT,OAAO,CAAE,CACPO,cAAc,CAAE,IADT,CAEPG,gBAAgB,CAAEJ,OAFX,CAFF,CAAD,CAAR,CARH,yDAAD,KAgBA;AACD,CAlBQ,CAkBN,CAACS,YAAD,CAlBM,CAAT,CAmBD,CA1BM"},"metadata":{},"sourceType":"module"}